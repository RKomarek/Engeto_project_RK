-- 3. Která kategorie potravin zdražuje nejpomaleji (je u ní nejnižší percentuální meziroční nárůst)?

SELECT
	t1.food_category,
	AVG(t1.price) AS avg_price,
	MIN(t1.payroll_year) AS start_year,
	max(t1.payroll_year) AS end_year,
	round(avg(t1.price - t2.price) / t2.price * 100, 2) AS avg_price_growth
FROM t_Radek_Komarek_project_SQL_primary_final t1 
JOIN t_Radek_Komarek_project_SQL_primary_final t2
	ON t1.food_category = t2.food_category
	AND t1.payroll_year = t2.payroll_year + 1
GROUP BY t1.food_category
ORDER BY avg_price_growth
LIMIT 1;
